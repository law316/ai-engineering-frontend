<!DOCTYPE html>
<html>
<head>
<title>AI Customer Service</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Poppins:400,600">
<style>
* { margin:0; padding:0; box-sizing:border-box; font-family:'Poppins', sans-serif }

body { background:#eef1f7; overflow-x:hidden }

/* Floating animated background */
.bg-shapes span {
  position:absolute;
  border-radius:50%;
  opacity:0.4;
  animation: float 15s infinite ease-in-out alternate;
}
.bg-shapes span:nth-child(1){width:160px;height:160px;background:#6C5CE7;top:10%;left:5%;animation-delay:1s}
.bg-shapes span:nth-child(2){width:120px;height:120px;background:#00CEC9;top:60%;left:15%;animation-delay:2s}
.bg-shapes span:nth-child(3){width:200px;height:200px;background:#0984E3;top:30%;right:10%;animation-delay:3s}
.bg-shapes span:nth-child(4){width:140px;height:140px;background:#74B9FF;bottom:10%;right:15%;animation-delay:4s}
@keyframes float {
  0% {transform: translateY(0px) scale(1);}
  100% {transform: translateY(-40px) scale(1.2);}
}

/* Hero section */
.hero {
  height:85vh;
  display:flex;
  justify-content:center;
  align-items:center;
  flex-direction:column;
  text-align:center;
  position:relative;
  z-index:2;
}
.hero h1 {font-size:3.4rem;color:#2d3436}
.hero p {font-size:1.3rem;color:#636e72;margin-top:10px;margin-bottom:30px}
.hero button {
  padding:14px 28px;
  font-size:1rem;
  border:none;
  background:#6C5CE7;
  color:white;
  border-radius:30px;
  cursor:pointer;
  transition:0.3s;
}
.hero button:hover {background:#5a4ad1; transform:scale(1.05)}

/* Chatbox */
.chat-box {
  width:360px;
  position:fixed;
  bottom:20px;
  right:20px;
  background:rgba(255,255,255,0.25);
  backdrop-filter:blur(12px);
  border-radius:16px;
  box-shadow:0 8px 24px rgba(0,0,0,0.15);
  overflow:hidden;
  border:1px solid rgba(255,255,255,0.3);
  z-index:10;
}

.chat-header {
  background:#6C5CE7;
  padding:14px;
  color:white;
  text-align:center;
  font-weight:600;
}

.chat-body {
  height:260px;
  padding:12px;
  overflow-y:auto;
  display:flex;
  flex-direction:column;
  gap:10px;
}

.bubble {
  padding:10px 14px;
  border-radius:12px;
  max-width:80%;
  line-height:1.4;
}
.bot {background:#dfe6e9; align-self:flex-start}
.user {background:#6C5CE7; color:white; align-self:flex-end}

.chat-input {
  display:flex;
  flex-direction:column;
  padding:8px;
  gap:6px;
  border-top:1px solid rgba(255,255,255,0.3);
}

.chat-input input, .chat-input textarea {
  padding:10px;
  border-radius:8px;
  border:1px solid #ccc;
  outline:none;
  font-size:14px;
}
.chat-input textarea {
  height:60px;
  resize:none;
}

.chat-input button {
  border:none;
  padding:12px;
  background:#6C5CE7;
  color:#fff;
  border-radius:8px;
  cursor:pointer;
  font-weight:600;
}
.chat-input button:hover {background:#5a4ad1}
</style>
</head>

<body>

<div class="bg-shapes">
  <span></span><span></span><span></span><span></span>
</div>

<section class="hero">
  <h1>Smart AI Customer Service</h1>
  <p>Automated email responses made fast, friendly & professional.</p>
  <button onclick="alert('Fill in your name & message in the chat box below to begin üöÄ')">Try It Now</button>
</section>

<!-- Chat Widget -->
<div class="chat-box">
  <div class="chat-header">Customer Support AI</div>

  <div class="chat-body" id="chatBody">
    <div class="bubble bot">Hello! Please enter your name and message to generate a reply üòä</div>
  </div>

  <div class="chat-input">
    <input type="text" id="nameInput" placeholder="Your Name" />
    <textarea id="msgInput" placeholder="Type your email message..."></textarea>
    <button onclick="sendMsg()">Generate Reply</button>
  </div>
</div>

<script>
function addBubble(who, msg){
  const div = document.createElement("div");
  div.className = "bubble " + who;
  div.textContent = msg;
  document.getElementById("chatBody").appendChild(div);
  document.getElementById("chatBody").scrollTop = 99999;
}

async function sendMsg(){
  const name = document.getElementById("nameInput").value.trim();
  const message = document.getElementById("msgInput").value.trim();

  if(!name || !message){
    alert("Please enter both your name and message ‚ùó");
    return;
  }

  addBubble("user", `Name: ${name}\nMessage: ${message}`);

  const typing = document.createElement("div");
  typing.className="bubble bot";
  typing.textContent="Generating reply...";
  document.getElementById("chatBody").appendChild(typing);

  try {
    const res = await fetch("https://aiengineerpractice.fly.dev/api/email", {
      method:"POST",
      headers:{"Content-Type":"application/json"},
      body: JSON.stringify({ name: name, message: message })
    });

    typing.remove();
    if(!res.ok) return addBubble("bot", "Server error. Try again.");

    const reply = await res.text();
    addBubble("bot", reply);

  } catch(e){
    typing.remove();
    addBubble("bot", "Connection failed üò¢");
  }
}
</script>

</body>
</html>
